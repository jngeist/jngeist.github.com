(function(a){function b(a){return a.replace(z,N).replace(A,function(a,b,f){for(var a=f.split(","),f=0,h=a.length;f<h;f++){var i=e(a[f].replace(H,N).replace(I,N))+M,j=[];a[f]=i.replace(B,function(a,b,e,f,h){if(b){if(j.length>0){var a=j,k,h=i.substring(0,h).replace(C,L);if(h==L||h.charAt(h.length-1)==M)h+="*";try{k=q(h)}catch(l){}if(k){h=0;for(e=k.length;h<e;h++){for(var f=k[h],m=f.className,n=0,o=a.length;n<o;n++){var p=a[n];!RegExp("(^|\\s)"+p.className+"(\\s|$)").test(f.className)&&p.b&&(p.b===!0||p.b(f)===!0)&&(m=g(m,p.className,!0))}f.className=m}}j=[]}return b}return(b=e?c(e):!G||G.test(f)?{className:d(f),b:!0}:null)?(j.push(b),"."+b.className):a})}return b+a.join(",")})}function c(b){var c=!0,e=d(b.slice(1)),g=b.substring(0,5)==":not(",i,j;g&&(b=b.slice(5,-1));var k=b.indexOf("(");k>-1&&(b=b.substring(0,k));if(b.charAt(0)==":")switch(b.slice(1)){case"root":c=function(a){return g?a!=m:a==m};break;case"target":if(o==8){c=function(b){function c(){var a=location.hash,c=a.slice(1);return g?a==L||b.id!=c:a!=L&&b.id==c}return h(a,"hashchange",function(){f(b,e,c())}),c()};break}return!1;case"checked":c=function(a){return F.test(a.type)&&h(a,"propertychange",function(){event.propertyName=="checked"&&f(a,e,a.checked!==g)}),a.checked!==g};break;case"disabled":g=!g;case"enabled":c=function(a){return E.test(a.tagName)?(h(a,"propertychange",function(){event.propertyName=="$disabled"&&f(a,e,a.a===g)}),r.push(a),a.a=a.disabled,a.disabled===g):b==":enabled"?g:!g};break;case"focus":i="focus",j="blur";case"hover":i||(i="mouseenter",j="mouseleave"),c=function(a){return h(a,g?j:i,function(){f(a,e,!0)}),h(a,g?i:j,function(){f(a,e,!1)}),g};break;default:if(!y.test(b))return!1}return{className:e,b:c}}function d(a){return u+"-"+(o==6&&t?s++:a.replace(D,function(a){return a.charCodeAt(0)}))}function e(a){return a.replace(K,N).replace(J,M)}function f(a,b,c){var d=a.className,b=g(d,b,c);b!=d&&(a.className=b,a.parentNode.className+=L)}function g(a,b,c){var d=RegExp("(^|\\s)"+b+"(\\s|$)"),e=d.test(a);return c?e?a:a+M+b:e?a.replace(d,N).replace(K,N):a}function h(a,b,c){a.attachEvent("on"+b,c)}function i(a,b){if(/^https?:\/\//i.test(a))return b.substring(0,b.indexOf("/",8))==a.substring(0,a.indexOf("/",8))?a:null;if(a.charAt(0)=="/")return b.substring(0,b.indexOf("/",8))+a;var c=b.split(/[?#]/)[0];return a.charAt(0)!="?"&&c.charAt(c.length-1)!="/"&&(c=c.substring(0,c.lastIndexOf("/")+1)),c+a}function j(a){return a?(n.open("GET",a,!1),n.send(),(n.status==200?n.responseText:L).replace(v,L).replace(w,function(b,c,d,e,f){return j(i(d||f,a))}).replace(x,function(b,c,d){return c=c||L," url("+c+i(d,a)+c+") "})):L}function k(){var a,c;a=l.getElementsByTagName("BASE");for(var d=a.length>0?a[0].href:l.location.href,e=0;e<l.styleSheets.length;e++)if(c=l.styleSheets[e],c.href!=L&&(a=i(c.href,d)))c.cssText=b(j(a));r.length>0&&setInterval(function(){for(var a=0,b=r.length;a<b;a++){var c=r[a];c.disabled!==c.a&&(c.disabled?(c.disabled=!1,c.a=!0,c.disabled=!0):c.a=c.disabled)}},250)}})(this),function(a){var b=a.event,c;b.special.smartresize={setup:function(){a(this).bind("resize",b.special.smartresize.handler)},teardown:function(){a(this).unbind("resize",b.special.smartresize.handler)},handler:function(a,b){var d=this,e=arguments;a.type="smartresize",c&&clearTimeout(c),c=setTimeout(function(){jQuery.event.handle.apply(d,e)},b==="execAsap"?0:100)}},a.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])}}(jQuery),function(a,b){function h(a,b,c,d,e,f){var g;return a.css(c,d+f),g=a.width(),g>=b?(a.css(c,""),g==b?{match:"exact",size:parseFloat((parseFloat(d)-.1).toFixed(3))}:{match:"estimate",size:parseFloat((parseFloat(d)-e).toFixed(3))}):!1}function i(a,c,d,e,f){var i=a.clone(!0).addClass("bigtext-cloned").css({"min-width":parseInt(d,10),width:"auto",position:"absolute",left:-9999,top:-9999}).appendTo(document.body),j=[],k=[],l=[],m=[];return i.find(c).css({"float":"left",clear:"left"}).each(function(a){var c=b(this),i=[4,1,.4,.1],k;if(c.hasClass(g.EXEMPT_CLASS)){j.push(null),m.push(null),l.push(!1);return}var n=20,o=parseFloat(c.css("font-size")),p=c.width(),q=(p/o).toFixed(6),r=parseFloat(((d-n)/q).toFixed(3));a:for(var s=0,t=i.length;s<t;s++)b:for(var u=1,v=4;u<=v;u++){if(r+u*i[s]>e){r=e;break a}k=h(c,d,"font-size",r+u*i[s],i[s],"px");if(k!==!1){r=k.size;if(k.match=="exact")break a;break b}}m.push(d/r),r>e?(j.push(e),l.push(!1)):!!f&&r<f?(j.push(f),l.push(!0)):(j.push(r),l.push(!1))}).each(function(a){var c=b(this),e=0,f=1,i;if(c.hasClass(g.EXEMPT_CLASS)){k.push(null);return}c.css("font-size",j[a]+"px");for(var l=1,m=5;l<m;l+=f){i=h(c,d,"word-spacing",l,f,"px");if(i!==!1){e=i.size;break}}c.css("font-size",""),k.push(e)}).removeAttr("style"),i.remove(),{fontSizes:j,wordSpacings:k,ratios:m,minFontSizes:l}}var c=0,d=b("head"),e=a.BigText,f=b.fn.bigtext,g={DEFAULT_MIN_FONT_SIZE_PX:null,DEFAULT_MAX_FONT_SIZE_PX:528,GLOBAL_STYLE_ID:"bigtext-style",STYLE_ID:"bigtext-id",LINE_CLASS_PREFIX:"bigtext-line",EXEMPT_CLASS:"bigtext-exempt",DEFAULT_CHILD_SELECTOR:"> div",childSelectors:{div:"> div",ol:"> li",ul:"> li"},noConflict:function(c){return c&&(b.fn.bigtext=f,a.BigText=e),g},init:function(){b("#"+g.GLOBAL_STYLE_ID).length||d.append(g.generateStyleTag(g.GLOBAL_STYLE_ID,[".bigtext * { white-space: nowrap; }",".bigtext ."+g.EXEMPT_CLASS+", .bigtext ."+g.EXEMPT_CLASS+" * { white-space: normal; }"]))},bindResize:function(c,d){b.throttle?b(a).unbind(c).bind(c,b.throttle(100,d)):(b.fn.smartresize&&(c="smartresize."+c),b(a).unbind(c).bind(c,d))},getStyleId:function(a){return g.STYLE_ID+"-"+a},generateStyleTag:function(a,c){return b("<style>"+c.join("\n")+"</style>").attr("id",a)},clearCss:function(a){var c=g.getStyleId(a);b("#"+c).remove()},generateCss:function(a,b,c,d){var e=[];g.clearCss(a);for(var f=0,h=b.length;f<h;f++)e.push("#"+a+" ."+g.LINE_CLASS_PREFIX+f+" {"+(d[f]?" white-space: normal;":"")+(b[f]?" font-size: "+b[f]+"px;":"")+(c[f]?" word-spacing: "+c[f]+"px;":"")+"}");return g.generateStyleTag(g.getStyleId(a),e)},jQueryMethod:function(a){return g.init(),a=b.extend({minfontsize:g.DEFAULT_MIN_FONT_SIZE_PX,maxfontsize:g.DEFAULT_MAX_FONT_SIZE_PX,childSelector:"",resize:!0},a||{}),this.each(function(){var e=b(this).addClass("bigtext"),f=a.childSelector||g.childSelectors[this.tagName.toLowerCase()]||g.DEFAULT_CHILD_SELECTOR,h=e.width(),j=e.attr("id");j||(j="bigtext-id"+c++,e.attr("id",j)),a.resize&&g.bindResize("resize.bigtext-event-"+j,function(){g.jQueryMethod.call(b("#"+j),a)}),g.clearCss(j),e.find(f).addClass(function(a,b){return[b.replace(new RegExp("\\b"+g.LINE_CLASS_PREFIX+"\\d+\\b"),""),g.LINE_CLASS_PREFIX+a].join(" ")});var k=i(e,f,h,a.maxfontsize,a.minfontsize);d.append(g.generateCss(j,k.fontSizes,k.wordSpacings,k.minFontSizes))})}};b.fn.bigtext=g.jQueryMethod,a.BigText=g}(this,jQuery),function(a){var b={baselineAlign:function(b){var c=a.extend({container:!1},b);return this.each(function(){var b=a(this);if(b.css("display")==="inline")return;b.attr("style","");var d=Math.floor(b.height());b.css("height",d);var e=parseFloat(a("html").css("line-height").replace("px","")),f=parseFloat(a("html").css("font-size").replace("px","")),g=d;if(c.container!==!1&&b.parents(c.container).length>0){var h=b.parents(c.container);h.attr("style","");var i=Math.ceil(h.height());h.css("height",i),g=Math.floor(h.outerHeight(!1))}var j=parseFloat(g%e),k=parseFloat(e-j);k<e/4&&(k+=e);if(c.container===!1){b.css("margin-bottom",k+"px");return}if(b.parents(c.container).length>0){b.parents(c.container).css("margin-bottom",k+"px");return}b.css("margin-bottom",k+"px")})},init:function(){var c=!1,d=!1,e=this,f=arguments;a(window).resize(function(){c=!0}),a(window).load(b.baselineAlign.apply(e,f)),setInterval(function(){if(c)return c=!1,b.baselineAlign.apply(e,f)},500)}};a.fn.baselineAlign=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c)return b.init.apply(this,arguments);a.error("Method "+c+" does not exist on jQuery.baselineAlign")}}(jQuery),typeof jQuery=="undefined"&&alert("Hashgrid: jQuery not loaded. Make sure it's linked to your pages.");var hashgrid=function(a){function w(a){if(b.modifierKey==null)return!0;var c=!0;switch(b.modifierKey){case"ctrl":c=a.ctrlKey?a.ctrlKey:!1;break;case"alt":c=a.altKey?a.altKey:!1;break;case"shift":c=a.shiftKey?a.shiftKey:!1}return c}function x(a){var b=!1,c=a.keyCode?a.keyCode:a.which;return c==13?b="enter":b=String.fromCharCode(c).toLowerCase(),b}function y(){C(b.cookiePrefix+b.id,(u?"1":"0")+","+o+","+c,1)}function z(){j.show(),n.css({width:j.width()}),n.children(".vert").each(function(){$(this).css("display","inline-block"),$(this).offset().top>0&&$(this).hide()})}function A(a){var d,e,f=a.target.tagName.toLowerCase();if(f=="input"||f=="textarea"||f=="select")return!0;e=w(a);if(!e)return!0;d=x(a);if(!d)return!0;switch(d){case b.showGridKey:m?u&&(j.hide(),m=!1,u=!1,y()):(z(),m=!0);break;case b.holdGridKey:m&&!u&&(u=!0,y());break;case b.foregroundKey:m&&(j.css("z-index")==q?(j.css("z-index",p),o="B"):(j.css("z-index",q),o="F"),y());break;case b.jumpGridsKey:m&&b.numberOfGrids>1&&(j.removeClass(b.classPrefix+c),c++,c>b.numberOfGrids&&(c=1),j.addClass(b.classPrefix+c),z(),/webkit/.test(navigator.userAgent.toLowerCase())&&F(),y())}return!0}function B(a){var c,d=w(a);return d?(c=x(a),c&&c==b.showGridKey&&!u&&(j.hide(),m=!1),!0):!0}function C(a,b,c){var d,e="";c&&(d=new Date,d.setTime(d.getTime()+c*24*60*60*1e3),e="; expires="+d.toGMTString()),document.cookie=a+"="+b+e+"; path=/"}function D(a){var b,c=document.cookie.split(";"),d=0,e=c.length,f=a+"=";for(;d<e;d++){b=c[d];while(b.charAt(0)==" ")b=b.substring(1,b.length);if(b.indexOf(f)==0)return b.substring(f.length,b.length)}return null}function E(a){C(a,"",-1)}function F(){var a=document.styleSheets[0];try{a.addRule(".xxxxxx","position: relative"),a.removeRule(a.rules.length-1)}catch(b){}}var b={id:"grid",modifierKey:null,showGridKey:"g",holdGridKey:"h",foregroundKey:"f",jumpGridsKey:"j",numberOfGrids:1,classPrefix:"grid-",cookiePrefix:"hashgrid"},c=1,d,e,f,g,h,i,j,k,l,m=!1,n,o="B",p=-1,q=9999,r,s,t,u=!1,v;if(typeof a=="object")for(s in a)b[s]=a[s];else typeof a=="string"&&(b.id=a);$("#"+b.id).length>0&&$("#"+b.id).remove(),l=$("<div></div>"),l.attr("id",b.id).css({display:"none","pointer-events":"none"}),$("body").prepend(l),j=$("#"+b.id),j.css("z-index")=="auto"&&j.css("z-index",p),r=parseFloat($(document).height()),j.height(r),j.append('<div id="'+b.id+'-horiz" class="horiz first-line">'),v=j.css("top"),j.css({top:"-999px",display:"block"}),g=$("#"+b.id+"-horiz"),h=g.outerHeight(),j.css({display:"none",top:v});if(h<=0)return!1;i=Math.floor(r/h),d="";for(f=i-1;f>=1;f--)d+='<div class="horiz"></div>';j.append(d),j.append($('<div class="vert-container"></div>')),n=j.children(".vert-container"),e=j.width(),n.css({width:e,position:"absolute",top:0}),n.append('<div class="vert first-line">&nbsp;</div>'),d="";for(f=0;f<30;f++)d+='<div class="vert">&nbsp;</div>';return n.append(d),n.children().height(r).css({display:"inline-block"}),k=D(b.cookiePrefix+b.id),typeof k=="string"?(t=k.split(","),t[2]=Number(t[2]),typeof t[2]=="number"&&!isNaN(t[2])&&(c=t[2].toFixed(0),j.addClass(b.classPrefix+c)),t[1]=="F"&&(o="F",j.css("z-index",q)),t[0]=="1"&&(m=!0,u=!0,z())):j.addClass(b.classPrefix+c),$(document).bind("keydown",A),$(document).bind("keyup",B),{}};$(document).ready(function(){var a=new hashgrid({numberOfGrids:2})}),function(){var a,b,c,d,e,f,g,h;d=function(a){var b,c,d,e;return e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b=["January","February","March","April","May","June","July","August","September","October","November","December"],c=new Date(a),c.getHours()>12?d=[c.getHours()-12,":",c.getMinutes()<10?"0":"",c.getMinutes(),' <span class="caps">pm</span>'].join(""):c.getHours()===12?d=[c.getHours(),":",c.getMinutes()<10?"0":"",c.getMinutes(),' <span class="caps">pm</span>'].join(""):d=[c.getHours(),":",c.getMinutes()<10?"0":"",c.getMinutes(),' <span class="caps">am</span>'].join(""),[e[c.getDay()],", ",b[c.getMonth()]," ",c.getDate(),", ",c.getFullYear(),'<span class="flavor"> at</span> ',d].join("")},e=function(){return $(this).parents("li").addClass("overlay")},f=function(){return $(this).parents("li").removeClass("overlay")},c=function(){var a;c.loaded=0,a=$(".tweets")&&$("#footer").data("tweets_loaded");if(!a)return $.getJSON("https://api.twitter.com/1/statuses/user_timeline.json?screen_name=jnicholasgeist&count=10&callback=?",function(a){var b;return b=$("<ul />").appendTo(".tweets"),$.each(a.slice(0,5),function(a,e){var f,g;return g=d(e.created_at),f=$('<li class="tweet item" />').append('<img src="'+e.user.profile_image_url+'" />').append("<p>"+e.text+"</p>").append("<time>"+g+"</time>").appendTo(b).delay(1,function(){c.loaded+=1;if(c.loaded===5)return $("#footer").data("tweets_loaded",!0)})})})},b=function(){var a;b.loaded=0,a=$(".tumblr")&&$("#footer").data("tumblr_loaded");if(!a)return $.getJSON("http://api.tumblr.com/v2/blog/inthecourseofmyduties.tumblr.com/posts/photo/?api_key=YpRsCSuXvfRUmDgJ6aDX8ajREAwYKeVDKsl1nEkVyGkAM6kFel&jsonp=?",function(a){var c,e;return e=$("<ul />").appendTo(".tumblr"),c=$(".tumblr").width(),$.each(a.response.posts.slice(0,5),function(a,c){var f,h,i,j;return j=c.post_url,i=d(c.date),h=c.photos[0].original_size.url,f=$("<li class='tumbl item'><a href='"+j+"'><img src='' /></a><time>"+i+"</time></li>").appendTo(e).find("img"),f.load(function(){b.loaded+=1;if(b.loaded===4)return $("#footer").data("tumblr_loaded",!0),g()}),f.attr("src",h)})})},g=function(){return $("img").baselineAlign()},a=function(){var b,c,d,e,f,g,h,i,j;a.delay!=null?b=a.delay:b=a.delay=50,c=$("#footer");if(c.data("tumblr_loaded")&&c.data("tweets_loaded")){j=[];for(d=i=0;i<=4;d=++i)e=$(".posts.foot li").eq(d),h=$(".tweets.foot li").eq(d),g=$(".tumblr.foot li").eq(d),f=Math.max(e.height(),h.height(),g.height()),j.push($.each([e,h,g],function(){var a;return a=f-$(this).height(),$(this).css({"min-height":f})}));return j}if(b<1e4)return window.setTimeout(a,b),a.delay+=b},h=function(){return $("header:not(article *), #siteheader>hgroup").each(function(){var a;return a=+$(this).find("h1").css("line-height").replace("px",""),$(this).bigtext({childSelector:"h1",maxfontsize:a})})},$(function(){return h(),$(window).on("smartresize",h),Modernizr.load({test:Modernizr.history,yep:"/media/js/jquery.pjax.js",complete:function(){return $("nav a:not([href*=':'])").pjax("#main")}}),$("a.nav").click(function(a){return a.preventDefault(),$("#sitenav").slideToggle()}),b(),c()})}.call(this);