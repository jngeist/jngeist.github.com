(function(a,b){function h(a,b,c,d,e,f){var g;return a.css(c,d+f),g=a.width(),g>=b?(a.css(c,""),g==b?{match:"exact",size:parseFloat((parseFloat(d)-.1).toFixed(3))}:{match:"estimate",size:parseFloat((parseFloat(d)-e).toFixed(3))}):!1}function i(a,c,d,e,f){var i=a.clone(!0).addClass("bigtext-cloned").css({"min-width":parseInt(d,10),width:"auto",position:"absolute",left:-9999,top:-9999}).appendTo(document.body),j=[],k=[],l=[],m=[];return i.find(c).css({"float":"left",clear:"left"}).each(function(a){var c=b(this),i=[4,1,.4,.1],k;if(c.hasClass(g.EXEMPT_CLASS)){j.push(null),m.push(null),l.push(!1);return}var n=20,o=parseFloat(c.css("font-size")),p=c.width(),q=(p/o).toFixed(6),r=parseFloat(((d-n)/q).toFixed(3));a:for(var s=0,t=i.length;s<t;s++)b:for(var u=1,v=4;u<=v;u++){if(r+u*i[s]>e){r=e;break a}k=h(c,d,"font-size",r+u*i[s],i[s],"px");if(k!==!1){r=k.size;if(k.match=="exact")break a;break b}}m.push(d/r),r>e?(j.push(e),l.push(!1)):!!f&&r<f?(j.push(f),l.push(!0)):(j.push(r),l.push(!1))}).each(function(a){var c=b(this),e=0,f=1,i;if(c.hasClass(g.EXEMPT_CLASS)){k.push(null);return}c.css("font-size",j[a]+"px");for(var l=1,m=5;l<m;l+=f){i=h(c,d,"word-spacing",l,f,"px");if(i!==!1){e=i.size;break}}c.css("font-size",""),k.push(e)}).removeAttr("style"),i.remove(),{fontSizes:j,wordSpacings:k,ratios:m,minFontSizes:l}}var c=0,d=b("head"),e=a.BigText,f=b.fn.bigtext,g={DEFAULT_MIN_FONT_SIZE_PX:null,DEFAULT_MAX_FONT_SIZE_PX:528,GLOBAL_STYLE_ID:"bigtext-style",STYLE_ID:"bigtext-id",LINE_CLASS_PREFIX:"bigtext-line",EXEMPT_CLASS:"bigtext-exempt",DEFAULT_CHILD_SELECTOR:"> div",childSelectors:{div:"> div",ol:"> li",ul:"> li"},noConflict:function(c){return c&&(b.fn.bigtext=f,a.BigText=e),g},init:function(){b("#"+g.GLOBAL_STYLE_ID).length||d.append(g.generateStyleTag(g.GLOBAL_STYLE_ID,[".bigtext * { white-space: nowrap; }",".bigtext ."+g.EXEMPT_CLASS+", .bigtext ."+g.EXEMPT_CLASS+" * { white-space: normal; }"]))},bindResize:function(c,d){b.throttle?b(a).unbind(c).bind(c,b.throttle(100,d)):(b.fn.smartresize&&(c="smartresize."+c),b(a).unbind(c).bind(c,d))},getStyleId:function(a){return g.STYLE_ID+"-"+a},generateStyleTag:function(a,c){return b("<style>"+c.join("\n")+"</style>").attr("id",a)},clearCss:function(a){var c=g.getStyleId(a);b("#"+c).remove()},generateCss:function(a,b,c,d){var e=[];g.clearCss(a);for(var f=0,h=b.length;f<h;f++)e.push("#"+a+" ."+g.LINE_CLASS_PREFIX+f+" {"+(d[f]?" white-space: normal;":"")+(b[f]?" font-size: "+b[f]+"px;":"")+(c[f]?" word-spacing: "+c[f]+"px;":"")+"}");return g.generateStyleTag(g.getStyleId(a),e)},jQueryMethod:function(a){return g.init(),a=b.extend({minfontsize:g.DEFAULT_MIN_FONT_SIZE_PX,maxfontsize:g.DEFAULT_MAX_FONT_SIZE_PX,childSelector:"",resize:!0},a||{}),this.each(function(){var e=b(this).addClass("bigtext"),f=a.childSelector||g.childSelectors[this.tagName.toLowerCase()]||g.DEFAULT_CHILD_SELECTOR,h=e.width(),j=e.attr("id");j||(j="bigtext-id"+c++,e.attr("id",j)),a.resize&&g.bindResize("resize.bigtext-event-"+j,function(){g.jQueryMethod.call(b("#"+j),a)}),g.clearCss(j),e.find(f).addClass(function(a,b){return[b.replace(new RegExp("\\b"+g.LINE_CLASS_PREFIX+"\\d+\\b"),""),g.LINE_CLASS_PREFIX+a].join(" ")});var k=i(e,f,h,a.maxfontsize,a.minfontsize);d.append(g.generateCss(j,k.fontSizes,k.wordSpacings,k.minFontSizes))})}};b.fn.bigtext=g.jQueryMethod,a.BigText=g})(this,jQuery);